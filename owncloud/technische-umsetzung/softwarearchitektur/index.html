<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <meta name="author" content="Lukas Biermann, Nina Herrmann, Wladislaw Iwanzow, Dennis Meis, Jonathan Neugebauer">  
    <link rel="shortcut icon" href="../../../img/favicon.ico">

    <title>Softwarearchitektur - sciebo@Learnweb</title>

    <link href="../../../css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/font-hack/2.018/css/hack.min.css">
    <link href='//fonts.googleapis.com/css?family=PT+Sans:400,400italic,700,700italic&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href="../../../css/base.css" rel="stylesheet">
    <link href="../../../css/cinder.css" rel="stylesheet">
    <link rel="stylesheet" href="../../../css/highlight.css">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js"></script>
    <script>
    WebFont.load({
        google: {
            families: ['Open Sans', 'PT Sans']
        }
    });
    </script>

    
</head>

<body>

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="../../..">sciebo@Learnweb</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="../../..">Home</a>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">ownCloud <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Technische Umsetzung</a>
    <ul class="dropdown-menu">
        
            
<li class="active">
    <a href="./">Softwarearchitektur</a>
</li>

        
            
<li >
    <a href="../oauth2-app/">OAuth 2.0 App</a>
</li>

        
            
<li >
    <a href="../core-anpassungen/">Core Anpassungen</a>
</li>

        
    </ul>
  </li>

                        
                            
<li >
    <a href="../../benutzung/">Benutzung</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Moodle <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Technische Umsetzung</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../../moodle/technische-umsetzung/softwarearchitektur/">Softwarearchitektur</a>
</li>

        
            
<li >
    <a href="../../../moodle/technische-umsetzung/admin-tool/">Admin Tool</a>
</li>

        
            
<li >
    <a href="../../../moodle/technische-umsetzung/repository/">Repository</a>
</li>

        
            
<li >
    <a href="../../../moodle/technische-umsetzung/activity/">Collaborative Folders</a>
</li>

        
    </ul>
  </li>

                        
                            
<li >
    <a href="../../../moodle/benutzung/">Benutzung</a>
</li>

                        
                        </ul>
                    </li>
                
                
                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Suchen
                    </a>
                </li>
                
                    <li >
                        <a rel="next" href="../../..">
                            <i class="fa fa-arrow-left"></i> Zurück
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../oauth2-app/">
                            Weiter <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                
                
                    <li>
                        <a href="https://github.com/pssl16">
                            
                                <i class="fa fa-github"></i>
                            
                            GitHub
                        </a>
                    </li>
                
            </ul>
        </div>
    </div>
</div>

    <div class="container">
        
        <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="first-level active"><a href="#softwarearchitektur">Softwarearchitektur</a></li>
        
            <li class="second-level"><a href="#bestandteile">Bestandteile</a></li>
            
                <li class="third-level"><a href="#oauth-20-app">OAuth 2.0 App</a></li>
            
                <li class="third-level"><a href="#core-anpassungen">Core Anpassungen</a></li>
            
        
    
    </ul>
</div></div>
        <div class="col-md-9" role="main">

<h1 id="softwarearchitektur">Softwarearchitektur</h1>
<p>Da wir möglichst keine neue Schnittstelle implementieren wollten, war es das Ziel, die bestehenden Schnittstellen in ownCloud um OAuth 2.0 zu erweitern. Zunächst war dafür die Implementierung des OAuth 2.0 Protokolls mit seinen Schnittstellen notwendig. Außerdem musste zur Umsetzung der <a href="../../..#integrationsszenarien">Integrationsszenarien</a> der Zugriff auf <a href="https://doc.owncloud.org/server/9.1/user_manual/files/access_webdav.html">WebDAV</a> und die <a href="https://doc.owncloud.org/server/9.1/developer_manual/core/ocs-share-api.html">OCS Share API</a> über OAuth 2.0 bereitgestellt werden.</p>
<h2 id="bestandteile">Bestandteile</h2>
<h3 id="oauth-20-app">OAuth 2.0 App</h3>
<p>Zur Implementierung von OAuth 2.0 entschieden wir uns in Absprache mit einem ownCloud Entwickler, eine <a href="https://doc.owncloud.org/server/9.1/developer_manual/app/">ownCloud App</a> namens <code>oauth2</code> zu erstellen. Der Vorteil einer solchen Lösung ist, dass OAuth 2.0 zu einer bestehenden ownCloud Installation einfach hinzugefügt und auch wieder entfernt werden kann. Die Möglichkeit, <a href="https://doc.owncloud.org/server/9.1/developer_manual/app/api.html">RESTful APIs</a> und eigene <a href="https://doc.owncloud.org/server/9.1/developer_manual/app/schema.html">Datenmodelle</a> in Apps zu definieren, stellten alle notwendigen Werkzeuge für die Umsetzung des OAuth 2.0 Protokolls bereit.</p>
<h3 id="core-anpassungen">Core Anpassungen</h3>
<p>Zur Erweiterung der WebDAV Schnittstelle um OAuth 2.0 wurde die Implementierung von WebDAV im <a href="https://github.com/owncloud/core">ownCloud Core</a> untersucht. Es stellte sich heraus, dass hierfür auch eine ownCloud App namens <code>dav</code> verwendet wurde, die die <a href="http://sabre.io">sabre/dav</a> Bibliothek zur Implementierung des WebDAV-Serves nutzt. Da die Bibliothek den Austausch der Authentifizierung über eigene Authentication Backends unterstützt, entschieden wir uns für die Implementierung eines Backends für OAuth 2.0,
das wir ebenfalls über die <code>oauth2</code> App bereitstellen wollten. Um eigene Authentication Backends für die <code>dav</code> App bekannt zu machen und gleichzeitig keine Abhängigkeit zwischen den Apps zu schaffen,
nutzten wir Event Listener. Notwendig dafür war die Registrierung des OAuth 2.0 Backends durch die <code>oauth2</code> App. Außerdem musste die <code>dav</code> App dahingehend angepasst werden, zusätzliche Authentication Backends zu laden. Hierfür wurde der Pull Request <a href="https://github.com/owncloud/core/pull/26742">owncloud/core#26742</a> erstellt. Ein Backport für ownCloud 9.1 ist im Pull Request <a href="https://github.com/owncloud/core/pull/27370">owncloud/core#27370</a> zu finden.</p>
<p>Schließlich musste noch die OCS Share API um OAuth 2.0 erweitert werden. Die Implementierung dieser API wird größtenteils durch die ownCloud App <code>files_sharing</code> bereitgestellt. Daher mussten Änderungen auf Ebene von ownCloud Apps und im Speziellen bei der Authentifizierung der von ihnen definierten APIs durchgeführt werden. Das bedeutete, dass auch hierfür Änderungen am ownCloud Core notwendig waren. Gleichzeitig sollten aber keine Abhängigkeiten zwischen dem Core und der <code>oauth2</code> App geschaffen werden. Wir folgten dem Vorschlag eines ownCloud Entwicklers, dafür einen Plugin Mechanismus zu implementieren. Auch diese Änderungen sind im Pull Request <a href="https://github.com/owncloud/core/pull/26742">owncloud/core#26742</a> (analog dazu <a href="https://github.com/owncloud/core/pull/27370">owncloud/core#27370</a>) zu finden.</p>
<p>Folgende Tabelle fasst die Funktionen der einzelnen Bestandteile zusammen.</p>
<table>
<thead>
<tr>
<th align="left">Bestandteil</th>
<th align="left">Funktion</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><a href="../oauth2-app">OAuth 2.0 App</a></td>
<td align="left">Implementierung des OAuth 2.0 Protokolls mit der notwendigen Authentifizierungslogik für die WebDAV Schnittstelle und ownCloud APIs</td>
</tr>
<tr>
<td align="left"><a href="../core-anpassungen">Core Anpassungen</a></td>
<td align="left">Erweiterung der Authentifizierung in der <code>dav</code> App und für ownCloud APIs um das Laden benutzerdefinierter Authentifizierungsmethoden</td>
</tr>
</tbody>
</table></div>
        
    </div>

    <footer class="col-md-12 text-center">
        <hr>
        <p>
        <small>Copyright &copy; 2017 PSSL16<br></small>
        
        <small>Dokumentation erzeugt mit <a href="http://www.mkdocs.org/">MkDocs</a>.</small></p>
    </footer>

    <script src="../../../js/jquery-1.10.2.min.js"></script>
    <script src="../../../js/bootstrap-3.0.3.min.js"></script>
    <script src="../../../js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script>
    var base_url = '../../..';
    </script>
    <script data-main="../../../mkdocs/js/search.js" src="../../../mkdocs/js/require.js"></script>
    <script src="../../../js/base.js"></script>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">Schließen</span>
                    </button>
                    <h4 class="modal-title" id="exampleModalLabel">Suchen</h4>
                </div>
                <div class="modal-body">
                    <p>
                        Hier können Sie die Dokumentation durchsuchen. Geben Sie Ihre Suchbegriffe unten ein.
                    </p>
                    <form role="form">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="Suchen..." id="mkdocs-search-query">
                        </div>
                    </form>
                    <div id="mkdocs-search-results"></div>
                </div>
                <div class="modal-footer">
                </div>
            </div>
        </div>
    </div>

    </body>

</html>
